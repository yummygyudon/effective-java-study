# [Item24] 멤버 클래스는 되도록 static으로 만들라
<details open>
    <summary><b>Index</b></summary>
<div markdown="1">

- [중첩 클래스](#중첩-클래스--nested-)
  - [멤버 클래스](#멤버-클래스)
    - [정적 멤버 클래스](#정적-멤버-클래스)
    - [비정적 멤버 클래스](#비정적-멤버-클래스)
  - [익명 클래스](#익명-클래스)
  - [지역 클래스](#지역-클래스)

</div>
</details>

<br/>

---
#### 🌟 핵심 🌟
```text
* 메서드 밖에서도 사용 / 메서드 안에 정의하기에 길가 -> "멤버 클래스"
  - 멤버 클래스 인스턴스 각각이 바깥 인스턴스 참조 : "비정적 멤버 클래스"
  
  - "비정적 멤버 클래스" 상황이 아니라면 : "정적 멤버 클래스" 
  
  
* 중첩 클래스가 쓰이는 메서드가 단 하나 
  ++ 해당 인스턴스 생성 지점이 단 한 곳
  ++ 해당 타입으로 쓰기에 적합한 클래스/인터페이스 존재 : "익명 클래스"
  
* "익명 클래스" 상황이 아니라면 : "지역 클래스"
```

<br/>

---
## 중첩 클래스 (nested)
> **다른 클래스 안**에 정의된 클래스
- 본 중첩 클래스는 <u>자신을 감싼 "**바깥 클래스**"</u>에서만 사용되어야 한다.
  - 이 외의 쓰임새 존재 → `톱 레벨 클래스`

#### ⁜ 종류
- **멤버 클래스**
  - **정적** 멤버 클래스
  - **비정적** 멤버 클래스 `내부 클래스(inner class)`
- **익명 클래스** `내부 클래스(inner class)`
- **지역 클래스** `내부 클래스(inner class)`

---
### 멤버 클래스
#### ① `정적` 멤버 클래스
- 다른 클래스 안에 선언 & 감싼 바깥 클래스의 **private 멤버** 접근 가능
- 타 정적(`static`) 멤버와 동일한 접근 규칙
  - `private` 선언 시, **<u>감싼 바깥 클래스</u>에서만** 접근 가능

흔히 바깥 클래스와 함께 쓰일 때만 유용한<br/>
" **public 도우미 클래스** "로 사용된다.

<br/>

#### ② `비정적` 멤버 클래스
> `어댑터` **정의** 시 자주 활용

```java
import java.util.AbstractSet;
import java.util.Iterator;

public class MySet<E> extends AbstractSet<E> {
    @Override
    public Iterator<E> iterator() {
        return new MyIterator();
    }

    private class MyIterator implements Iterator<E> {
    }
}
```
- 감싼 **바깥 클래스의 인스턴스**와 **암묵적 연결**
  - **비정적 멤버 클래스 내 메서드**에서 <br/>
    <u>바깥 인스턴스의 **메서드 호출** / **참조 값**</u> 활용 가능 ( <u>정규화된 `this`</u> 필요 )<br/><br/>
  - _바깥 인스턴스 독립적인 존재 → `정적` 멤버 클래스_<br/><br/>
  - 바깥 인스턴스와의 **관계** : **인스턴스화 확립** & **변경 불가**<br/><br/>
  - 주로 " 바깥 클래스.**인스턴스 메서드** → <u>멤버 클래스 생성자</u> 호출 " 의 방식으로 생성
    - 가끔 `<바깥 클래스 명>.new MemberClass(args)`과 같은 **수동** 방식으로도 생성한다.

⁜ ⌜ **정규화된** `this` ⌟ : `<클래스 명>.this` (**바깥 클래스의 이름 명시**하는 용법)

<br/>

멤버 클래스에서 <u>바깥 인스턴스에 **접근**할 일</u>이 없다면<br/>
무조건 `static`과 함께 `정적` **멤버 클래스**로 만드는 것이 좋다.<br/>
( `비정적` 멤버 클래스 : _참조 저장에서 발생하는 **시간 및 공간 낭비** + **G.C 미수거 사태**_ )

<br/>
<br/>

---
### 익명 클래스
> - (_현재 : Lambda_) **즉석 소형 함수 객체/처리 객체** 생성 시 활용
> - 정적 팩터리 메서드 구현 시 활용
>   - _return에 바로 익명 객체 반환_

- <u>쓰이는 지점</u>에서 "**선언**" & "**인스턴스화**" 동시
- 코드 어디서든 생성 가능
- 오직 "**비정적인 문맥**"에서 사용될 때만 <u>바깥 클래스 인스턴스 참조</u> 가능
- **상수 변수** 이외의 <u>정적 멤버</u>를 **가질 수 없음** ( _비정적/정적 문맥 공통_ )

<br/>

#### ⁜ 제약
- "**<u>선언한 지점</u>에서만**" **인스턴스화** 가능
- <u>`instanceof` 검사</u> / <u>클래스 이름 필요 작업</u> 시 활용 ❌
- **다중 구현** ❌
- 인터페이스 구현 & 클래스 상속 **동시** ❌
- **클라이언트** : <u>상위 타입 **상속 멤버**</u> 외에는 호출 ❌
- 표현식 중간에 형성 → **길면 안됨** (가독성)

<br/>
<br/>

---
### 지역 클래스
- "지역 변수 선언 가능 영역" → 실질적으로 어디서든 선언 가능
- 유효범위 : "지역 변수"와 동일

다른 위 중첩 클래스들과 하나씩 **공통점**도 존재 한다.

- 이름 ⭕️ & 반복 사용 ⭕️ ( _**멤버** 클래스_ )
- 비정적 문맥에서 사용될 때만 바깥 인스턴스 참조 가능 ( _**익명** 클래스_ )
- 정적 멤버 ❌ ( _**익명** 클래스_ )
- 가독성을 위해 짧게 작성 ( _**익명** 클래스_ )